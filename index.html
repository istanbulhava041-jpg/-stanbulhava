<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ƒ∞stanbul Hava Durumu Pro</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root { --bg-grad: linear-gradient(180deg, #4A90E2 0%, #87CEEB 100%); --card-bg: rgba(255, 255, 255, 0.2); --text-color: #fff; }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Inter', sans-serif; }
        body { background: var(--bg-grad); background-attachment: fixed; min-height: 100vh; color: var(--text-color); display: flex; justify-content: center; padding: 20px; overflow-x: hidden; }
        .container { width: 100%; max-width: 500px; z-index: 10; }
        .selectors { display: flex; gap: 10px; margin-bottom: 20px; }
        select { flex: 1; padding: 12px; border-radius: 12px; border: none; background: var(--card-bg); color: white; backdrop-filter: blur(10px); outline: none; font-size: 14px; cursor: pointer; }
        select option { color: #333; }
        .main-card { background: var(--card-bg); backdrop-filter: blur(15px); border-radius: 24px; padding: 30px; text-align: center; box-shadow: 0 8px 32px rgba(0,0,0,0.1); margin-bottom: 20px; }
        .temp-big { font-size: 72px; font-weight: 300; margin: 10px 0; }
        .details-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-top: 20px; font-size: 14px; }
        .detail-item { background: rgba(255,255,255,0.1); padding: 10px; border-radius: 12px; }
        .chart-container { background: var(--card-bg); backdrop-filter: blur(15px); border-radius: 24px; padding: 20px; margin-bottom: 20px; }
        .forecast-scroll { display: flex; gap: 15px; overflow-x: auto; padding-bottom: 10px; scrollbar-width: none; }
        .forecast-scroll::-webkit-scrollbar { display: none; }
        .forecast-item { min-width: 80px; background: var(--card-bg); padding: 15px; border-radius: 16px; text-align: center; }
        #weather-anim { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1; }
        .drop { position: absolute; background: rgba(255,255,255,0.6); width: 2px; height: 15px; animation: fall linear infinite; }
        .snow { position: absolute; background: white; border-radius: 50%; width: 5px; height: 5px; animation: fall linear infinite; }
        @keyframes fall { to { transform: translateY(100vh); } }
    </style>
</head>
<body>
<div id="weather-anim"></div>
<div class="container">
    <div class="selectors">
        <select id="districts" onchange="updateNeighborhoods()"></select>
        <select id="neighborhoods" onchange="fetchWeather()"></select>
    </div>
    <div class="main-card">
        <h2 id="loc-name">Y√ºkleniyor...</h2>
        <div class="temp-big" id="current-temp">--¬∞</div>
        <p id="weather-desc">Durum</p>
        <div class="details-grid">
            <div class="detail-item">Hissedilen: <b id="feel-temp">--¬∞</b></div>
            <div class="detail-item">Nem: <b id="humidity">%--</b></div>
            <div class="detail-item">R√ºzgar: <b id="wind">-- km/s</b></div>
            <div class="detail-item">UV: <b id="uv">--</b></div>
        </div>
    </div>
    <div class="chart-container"><canvas id="hourlyChart"></canvas></div>
    <div class="forecast-scroll" id="forecast"></div>
</div>
<script>
const data = {
    "Adalar": {lat: 40.85, lon: 29.12, n: ["Burgazada", "Heybeliada", "Kƒ±nalƒ±ada", "Maden", "Nizam"]},
    "Arnavutk√∂y": {lat: 41.18, lon: 28.74, n: ["Adnan Menderes", "Anadolu", "Arnavutk√∂y Merkez", "Atat√ºrk", "Baklalƒ±", "Balaban", "Boƒüazk√∂y", "Bolluca", "Boyalƒ±k", "√áilingir", "Deliklikaya", "Dursunk√∂y", "Durusu", "Fatih", "Hacƒ±ma≈ülƒ±", "Hadƒ±mk√∂y", "Hara√ß√ßƒ±", "Hastane", "Hicret", "ƒ∞mrahor", "ƒ∞slambey", "Karaburun", "Karlƒ±bayƒ±r", "Mavig√∂l", "Mehmet Akif Ersoy", "Mustafa Kemal Pa≈üa", "Nenehatun", "√ñmerli", "Sazlƒ±bosna", "Ta≈üoluk", "Tayakadƒ±n", "Terkos", "Yassƒ±√∂ren", "Yavuz Selim", "Yenik√∂y", "Ye≈üilbayƒ±r"]},
    "Ata≈üehir": {lat: 40.98, lon: 29.11, n: ["A≈üƒ±k Veysel", "Atat√ºrk", "Barbaros", "Esatpa≈üa", "Ferhatpa≈üa", "Fetih", "ƒ∞√ßerenk√∂y", "ƒ∞n√∂n√º", "Kayƒ±≈üdaƒüƒ±", "K√º√ß√ºkbakkalk√∂y", "Mevlana", "Mimar Sinan", "Mustafa Kemal", "√ñrnek", "Yeni √áamlƒ±ca", "Yeni Sahra", "Yeni≈üehir"]},
    "Avcƒ±lar": {lat: 40.98, lon: 28.71, n: ["Ambarlƒ±", "Cihangir", "Denizk√∂≈ükler", "Firuzk√∂y", "G√ºm√º≈üpala", "Merkez", "Mustafa Kemal Pa≈üa", "Tahtakale", "√úniversite", "Ye≈üilkent"]},
    "Baƒücƒ±lar": {lat: 41.03, lon: 28.83, n: ["100. Yƒ±l", "15 Temmuz", "Baƒülar", "Barbaros", "√áƒ±nar", "Demirkapƒ±", "Fatih", "Fevzi √áakmak", "G√∂ztepe", "G√ºne≈üli", "H√ºrriyet", "ƒ∞n√∂n√º", "Kazƒ±m Karabekir", "Kemalpa≈üa", "Kirazlƒ±", "Mahmutbey", "Merkez", "Sancaktepe", "Yavuz Selim", "Yenig√ºn", "Yenimahalle", "Yƒ±ldƒ±ztepe"]},
    "Bah√ßelievler": {lat: 41.00, lon: 28.85, n: ["Bah√ßelievler", "Cumhuriyet", "√áoban√ße≈üme", "Fevzi √áakmak", "H√ºrriyet", "Kocasinan", "Siyavu≈üpa≈üa", "Soƒüanlƒ±", "≈ûirinevler", "Yenibosna", "Zafer"]},
    "Bakƒ±rk√∂y": {lat: 40.97, lon: 28.87, n: ["Atak√∂y 1.", "Atak√∂y 2-5-6.", "Atak√∂y 3-4-11.", "Atak√∂y 7-8-9-10.", "Cevizlik", "Kartaltepe", "Osmaniye", "Sakƒ±zaƒüacƒ±", "≈ûenlikk√∂y", "Yenimahalle", "Ye≈üilk√∂y", "Ye≈üilyurt", "Zeytinlik", "Zuhuratbaba", "Florya"]},
    "Ba≈üak≈üehir": {lat: 41.09, lon: 28.80, n: ["Altƒ±n≈üehir", "Bah√ße≈üehir 1. Kƒ±sƒ±m", "Bah√ße≈üehir 2. Kƒ±sƒ±m", "Ba≈üak", "Ba≈üak≈üehir", "G√ºvercintepe", "ƒ∞kitelli OSB", "Kayaba≈üƒ±", "≈ûahintepe", "≈ûamlar", "Ziya G√∂kalp"]},
    "Bayrampa≈üa": {lat: 41.04, lon: 28.90, n: ["Altƒ±ntepsi", "Cevatpa≈üa", "ƒ∞smet Pa≈üa", "Kartaltepe", "Kocatepe", "Muratpa≈üa", "Orta", "Terazidere", "Vatan", "Yenidoƒüan", "Yƒ±ldƒ±rƒ±m"]},
    "Be≈üikta≈ü": {lat: 41.04, lon: 29.00, n: ["Abbasaƒüa", "Akat", "Arnavutk√∂y", "Balmumcu", "Bebek", "Cihann√ºma", "Dikilita≈ü", "Etiler", "Gayrettepe", "Konaklar", "Kuru√ße≈üme", "K√ºlt√ºr", "Levazƒ±m", "Levent", "Mecidiye", "Muradiye", "Nisbetiye", "Ortak√∂y", "Sinanpa≈üa", "T√ºrkali", "Ulus", "Vi≈ünezade", "Yƒ±ldƒ±z"]},
    "Beykoz": {lat: 41.11, lon: 29.09, n: ["Acarlar", "Anadoluhisarƒ±", "Anadolukavaƒüƒ±", "Baklacƒ±", "√áamlƒ±bah√ße", "√áengeldere", "√áiftlik", "√áiƒüdem", "√áubuklu", "Fatih", "G√ºm√º≈üsuyu", "ƒ∞ncirk√∂y", "Kanlƒ±ca", "Kavacƒ±k", "Merkez", "Orta√ße≈üme", "Pa≈üabah√ße", "R√ºzgarlƒ±bah√ße", "Soƒüuksu", "Tokatk√∂y", "Yalƒ±k√∂y", "Yavuz Selim"]},
    "Beylikd√ºz√º": {lat: 41.00, lon: 28.63, n: ["Adnan Kahveci", "Barƒ±≈ü", "B√ºy√ºk≈üehir", "Cumhuriyet", "Dereaƒüzƒ±", "G√ºrpƒ±nar", "Kavaklƒ±", "Marmara", "Sahil", "Yakuplu"]},
    "Beyoƒülu": {lat: 41.03, lon: 28.97, n: ["Arap Cami", "Asmalƒ± Mescit", "Bedrettin", "Cihangir", "Fetihtepe", "G√ºm√º≈üsuyu", "Halƒ±cƒ±oƒülu", "H√ºseyinaƒüa", "ƒ∞stiklal", "Kaptanpa≈üa", "Karak√∂y", "Kasƒ±mpa≈üa", "Kulaksƒ±z", "√ñrnektepe", "Piri Pa≈üa", "S√ºtl√ºce", "≈ûahkulu", "Taksim", "Tarlaba≈üƒ±", "Tomtom"]},
    "B√ºy√ºk√ßekmece": {lat: 41.02, lon: 28.58, n: ["19 Mayƒ±s", "Ahmediye", "Alkent 2000", "Atat√ºrk", "Batƒ±k√∂y", "Celaliye", "Cumhuriyet", "Dizdariye", "Ekinoba", "Fatih", "G√ºzelce", "H√ºrriyet", "Kamiloba", "Kumburgaz", "Mimaroba", "Mimarsinan", "Murat √áe≈üme", "Pƒ±nartepe", "Sinanoba", "T√ºrkoba", "Ulus", "Yenimahalle"]},
    "√áatalca": {lat: 41.14, lon: 28.46, n: ["Akalan", "Aydƒ±nlar", "Ba≈üak", "Belgrat", "Binkƒ±lƒ±√ß", "√áakƒ±l", "√áiftlikk√∂y", "Daƒüyenice", "Ferhatpa≈üa", "G√∂k√ßeali", "ƒ∞nceƒüiz", "ƒ∞zzettin", "Kalei√ßi", "Karacak√∂y", "Kestanelik", "Oklalƒ±", "Ormanlƒ±", "Ovayenice", "Suba≈üƒ±", "Yalƒ±k√∂y"]},
    "√áekmek√∂y": {lat: 41.03, lon: 29.17, n: ["Alemdaƒü", "Aydƒ±nlar", "Cumhuriyet", "√áatalme≈üe", "Ek≈üioƒülu", "G√ºng√∂ren", "Hamidiye", "Kirazlƒ±dere", "Mehmet Akif", "Merkez", "Mimar Sinan", "Ni≈üantepe", "√ñmerli", "Soƒüukpƒ±nar", "Sultan√ßiftliƒüi", "Ta≈üdelen"]},
    "Esenler": {lat: 41.03, lon: 28.89, n: ["Birlik", "√áifte Havuzlar", "Davutpa≈üa", "Fatih", "Fevzi √áakmak", "Havaalanƒ±", "Kazƒ±m Karabekir", "Kemer", "Menderes", "Mimar Sinan", "Namƒ±k Kemal", "Nene Hatun", "Oru√ßreis", "Tuna", "Turgut Reis", "Yavuz Selim"]},
    "Esenyurt": {lat: 41.03, lon: 28.67, n: ["Ak√ßaburgaz", "Akevler", "Ak≈üemsettin", "Ardƒ±√ßlƒ±", "A≈üƒ±k Veysel", "Atat√ºrk", "Baƒülar√ße≈üme", "Balƒ±kyolu", "Barbaros Hayrettin Pa≈üa", "Battalgazi", "Cumhuriyet", "√áƒ±nar", "Dereyolu", "Fatih", "G√ºzelyurt", "H√ºrriyet", "ƒ∞ncirtepe", "ƒ∞n√∂n√º", "ƒ∞stiklal", "Koza", "Mehmet Akif Ersoy", "Mehtap", "Mevlana", "Namƒ±k Kemal", "√ñrnek", "Piri Reis", "Saadetdere", "Selahaddin Eyyubi", "Sultaniye", "S√ºleymaniye", "Talata≈üa", "Turgut √ñzal", "√ú√ßevler", "Yenikent", "Ye≈üilkent"]},
    "Ey√ºpsultan": {lat: 41.05, lon: 28.93, n: ["Aƒüa√ßlƒ±", "Akpƒ±nar", "Ak≈üemsettin", "Alibeyk√∂y", "√áƒ±r√ßƒ±r", "Defterdar", "D√ºƒümeciler", "Emniyettepe", "Esentepe", "G√∂kt√ºrk", "G√ºzeltepe", "I≈üƒ±klar", "ƒ∞hsaniye", "ƒ∞slambey", "Kemerburgaz", "Mimar Sinan", "Mithatpa≈üa", "Ni≈üancƒ±", "Odayeri", "Pirin√ß√ßi", "Rami Cuma", "Rami Yeni", "Sakarya", "Silahtaraƒüa", "Top√ßular", "Ye≈üilpƒ±nar"]},
    "Fatih": {lat: 41.01, lon: 28.94, n: ["Aksaray", "Balat", "Beyazƒ±t", "Cankurtaran", "Cerrahpa≈üa", "Dervi≈ü Ali", "Emin√∂n√º", "Haseki", "Karag√ºmr√ºk", "Kocamustafapa≈üa", "Mevlanakapƒ±", "Samanatya", "Sultanahmet", "Tahtakale", "Topkapƒ±", "Vefa", "Yedikule"]},
    "Gaziosmanpa≈üa": {lat: 41.05, lon: 28.90, n: ["Baƒülarba≈üƒ±", "Barbaros Hayrettin Pa≈üa", "Fevzi √áakmak", "H√ºrriyet", "Karadeniz", "Karayollarƒ±", "Karlƒ±tepe", "Kazƒ±m Karabekir", "Merkez", "Mevlana", "Pazari√ßi", "Sarƒ±g√∂l", "≈ûemsipa≈üa", "Yenidoƒüan", "Yƒ±ldƒ±ztabya"]},
    "G√ºng√∂ren": {lat: 41.02, lon: 28.87, n: ["Abdurrahman Nafiz G√ºrman", "Akƒ±ncƒ±lar", "Gen√ßosman", "G√ºne≈ütepe", "G√ºven", "Haznedar", "Mare≈üal √áakmak", "Mehmet Nesih √ñzmen", "Merkez", "Sanayi", "Tozkoparan"]},
    "Kadƒ±k√∂y": {lat: 40.99, lon: 29.02, n: ["19 Mayƒ±s", "Acƒ±badem", "Bostancƒ±", "Caddebostan", "Caferaƒüa", "Dumlupƒ±nar", "Eƒüitim", "Erenk√∂y", "Fenerbah√ße", "Feneryolu", "Fikirtepe", "G√∂ztepe", "Hasanpa≈üa", "Ko≈üuyolu", "Kozyataƒüƒ±", "Merdivenk√∂y", "Osmanaƒüa", "Rasimpa≈üa", "Sahrayƒ±cedit", "Suadiye", "Z√ºht√ºpa≈üa"]},
    "Kaƒüƒ±thane": {lat: 41.08, lon: 28.97, n: ["√áaƒülayan", "√áeliktepe", "Emniyet Evleri", "G√ºltepe", "G√ºrsel", "Hamidiye", "Harmantepe", "H√ºrriyet", "Mehmet Akif Ersoy", "Merkez", "Nurtepe", "Ortabayƒ±r", "Sanayi", "Seyrantepe", "≈ûirintepe", "Talatpa≈üa", "Telsizler", "Yahya Kemal", "Ye≈üilce"]},
    "Kartal": {lat: 40.90, lon: 29.19, n: ["Atalar", "Cevizli", "Cumhuriyet", "√áavu≈üoƒülu", "Esentepe", "G√ºm√º≈üpƒ±nar", "H√ºrriyet", "Karlƒ±ktepe", "Kordonboyu", "Orhantepe", "Orta", "Petrol ƒ∞≈ü", "Soƒüanlƒ±k", "Topselvi", "Uƒüurmumcu", "Yakacƒ±k", "Yalƒ±", "Yukarƒ±"]},
    "K√º√ß√ºk√ßekmece": {lat: 41.00, lon: 28.77, n: ["Atakent", "Atat√ºrk", "Be≈üyol", "Cennet", "Cumhuriyet", "Fatih", "Fevzi √áakmak", "G√ºltepe", "Halkalƒ± Merkez", "ƒ∞n√∂n√º", "ƒ∞stasyon", "Kanarya", "Kartaltepe", "Kemalpa≈üa", "Mehmet Akif", "S√∂ƒü√ºtl√º √áe≈üme", "Sultan Murat", "Tevfik Bey", "Yarƒ±mburgaz", "Yeni Mahalle", "Ye≈üilova"]},
    "Maltepe": {lat: 40.93, lon: 29.14, n: ["Altay√ße≈üme", "Altƒ±ntepe", "Aydƒ±nevler", "Baƒülarba≈üƒ±", "Ba≈üƒ±b√ºy√ºk", "B√ºy√ºkbakkalk√∂y", "Cevizli", "√áƒ±nar", "Esenkent", "Feyzullah", "Fƒ±ndƒ±klƒ±", "Girne", "G√ºlensu", "G√ºlsuyu", "ƒ∞dealtepe", "K√º√ß√ºkyalƒ±", "Yalƒ±", "Z√ºmr√ºtevler"]},
    "Pendik": {lat: 40.87, lon: 29.23, n: ["Ahmet Yesevi", "Bah√ßelievler", "Batƒ±", "√áam√ße≈üme", "√áamlƒ±k", "√áƒ±nardere", "Doƒüu", "Dumlupƒ±nar", "Ertuƒürul Gazi", "Esenler", "Esenyalƒ±", "Fatih", "Fevzi √áakmak", "G√ºll√º Baƒülar", "G√ºzelyalƒ±", "Harmandere", "Kavakpƒ±nar", "Kaynarca", "Kurtk√∂y", "Orhangazi", "Orta", "Ramanoƒülu", "Sapan Baƒülarƒ±", "S√ºl√ºntepe", "≈ûeyhli", "Velibaba", "Yayalar", "Yeni Mahalle", "Yeni≈üehir", "Ye≈üilbaƒülar"]},
    "Sancaktepe": {lat: 41.00, lon: 29.23, n: ["Abdurrahmangazi", "Akpƒ±nar", "Atat√ºrk", "Emek", "Ey√ºp Sultan", "Fatih", "Hilal", "ƒ∞n√∂n√º", "Meclis", "Merve", "Mevlana", "Osmangazi", "Pa≈üak√∂y", "Safa", "Sarƒ±gazi", "Veysel Karani", "Yenidoƒüan", "Yunusemre"]},
    "Sarƒ±yer": {lat: 41.17, lon: 29.05, n: ["Ayazaƒüa", "Bah√ßek√∂y", "Baltalimanƒ±", "B√ºy√ºkdere", "Cumhuriyet", "√áayƒ±rba≈üƒ±", "Dar√º≈ü≈üafaka", "Demirci", "Emirgan", "Fatih Sultan Mehmet", "Ferahevler", "Garip√ße", "G√ºm√º≈üdere", "Huzur", "ƒ∞stinye", "Kemer", "Kƒ±sƒ±rkaya", "Kire√ßburnu", "Kocata≈ü", "Kumk√∂y", "Madem", "Maslak", "Merkez", "Pƒ±nar", "Poligon", "Ptt Evleri", "Re≈üitpa≈üa", "Rumelifeneri", "Rumelihisarƒ±", "Rumelikavaƒüƒ±", "Tarabya", "Uskumruk√∂y", "Yenik√∂y", "Zekeriyak√∂y"]},
    "Silivri": {lat: 41.07, lon: 28.24, n: ["Alibey", "Alipa≈üa", "Bekirli", "Beyciler", "B√ºy√ºk√ßavu≈ülu", "Cumhuriyet", "√áanta", "√áayƒ±rdere", "Danamandƒ±ra", "Fatih", "Fener", "Gazitepe", "G√ºm√º≈üyaka", "H√ºrriyet", "ƒ∞smetpa≈üa", "Kadƒ±k√∂y", "Kavaklƒ±", "Mimarsinan", "Ortak√∂y", "Piri Mehmet Pa≈üa", "Sancaktar", "Sayalar", "Selimpa≈üa", "Semizkumlar", "Yenimahalle"]},
    "Sultanbeyli": {lat: 40.96, lon: 29.26, n: ["Abdurrahmangazi", "Adil", "Ahmet Yesevi", "Ak≈üemsettin", "Battalgazi", "Fatih", "Hamidiye", "Hasanpa≈üa", "Mecidiye", "Mehmet Akif", "Mimar Sinan", "Necip Fazƒ±l", "Orhangazi", "Turgut Reis", "Yavuz Selim"]},
    "Sultangazi": {lat: 41.10, lon: 28.86, n: ["50. Yƒ±l", "75. Yƒ±l", "Cebeci", "Cumhuriyet", "Esentepe", "Eski Habipler", "Gazi", "Habipler", "ƒ∞smetpa≈üa", "Malko√ßoƒülu", "Sultan√ßiftliƒüi", "Uƒüur Mumcu", "Yayla", "Yunusemre", "Z√ºbeyde Hanƒ±m"]},
    "≈ûile": {lat: 41.17, lon: 29.61, n: ["Aƒüva", "Ahmetli", "Alacalƒ±", "Avcƒ±koru", "Balibey", "Bƒ±√ßkƒ±dere", "Bozhane", "√áavu≈ü", "Darlƒ±k", "Hacƒ±kasƒ±m", "ƒ∞mrenli", "Karakiraz", "Kumbaba", "Kurfallƒ±", "Me≈ürutiyet", "Ovacƒ±k", "Sahilk√∂y", "Tekek√∂y", "√úvezli", "Yenik√∂y"]},
    "≈ûi≈üli": {lat: 41.06, lon: 28.98, n: ["19 Mayƒ±s", "Bozkurt", "Cumhuriyet", "Duatepe", "Ergenekon", "Esentepe", "Eski≈üehir", "Ferik√∂y", "Fulya", "G√ºlbahar", "Halaskargazi", "Halide Edip Adƒ±var", "Halil Rƒ±fat Pa≈üa", "Harbiye", "ƒ∞n√∂n√º", "ƒ∞zzet Pa≈üa", "Kaptanpa≈üa", "Ku≈ütepe", "Mahmut ≈ûevket Pa≈üa", "Mecidiyek√∂y", "Merkez", "Me≈ürutiyet", "Pa≈üa", "Te≈üvikiye", "Yayla"]},
    "Tuzla": {lat: 40.81, lon: 29.30, n: ["Akfƒ±rat", "Anadolu", "Aydƒ±nlƒ±", "Cami", "Evliya √áelebi", "Fatih", "ƒ∞√ßmeler", "ƒ∞stasyon", "Mescit", "Mimar Sinan", "Orhanlƒ±", "Orta", "Postane", "≈ûifa", "Tepe√∂ren", "Yayla"]},
    "√úmraniye": {lat: 41.02, lon: 29.10, n: ["Adem Yavuz", "Altƒ±n≈üehir", "Armaƒüanevler", "A≈üaƒüƒ± Dudullu", "Atakent", "Atat√ºrk", "Cemil Meri√ß", "√áakmak", "√áamlƒ±k", "Dumlupƒ±nar", "Elmalƒ±kent", "Esenevler", "Esen≈üehir", "Fatih Sultan Mehmet", "Hekimba≈üƒ±", "Huzur", "Ihlamurkuyu", "ƒ∞nkƒ±lap", "ƒ∞stiklal", "Kazƒ±m Karabekir", "Madenler", "Mehmet Akif", "Namƒ±k Kemal", "Necip Fazƒ±l", "Parseller", "≈ûerifali", "Site", "Tantavi", "Tatlƒ±su", "Tepe√ºst√º", "Topaƒüacƒ±", "Yamanevler", "Yeni≈üehir", "Yukarƒ± Dudullu"]},
    "√úsk√ºdar": {lat: 41.02, lon: 29.01, n: ["Acƒ±badem", "Ahmediye", "Altunizade", "Aziz Mahmud H√ºdayi", "Bah√ßelievler", "Barbaros", "Beylerbeyi", "Bulgurlu", "Burhaniye", "Cumhuriyet", "√áengelk√∂y", "Ferah", "G√ºzeltepe", "ƒ∞cladiye", "Kandilli", "Kuleli", "Kuzguncuk", "K√º√ß√ºk √áamlƒ±ca", "K√º√ß√ºksu", "Kuleli", "Kirazlƒ±tepe", "Mehmet Akif Ersoy", "Mimar Sinan", "Murat Reis", "Salacak", "Selami Ali", "Selimiye", "Sultantepe", "√únalan", "Yavuzt√ºrk", "Zeynep Kamil"]},
    "Zeytinburnu": {lat: 40.99, lon: 28.90, n: ["Be≈ütelsiz", "√áƒ±rpƒ±cƒ±", "G√∂kalp", "Kazlƒ±√ße≈üme", "Maltepe", "Merkezefendi", "Nuripa≈üa", "Seyitnizam", "S√ºmer", "Telsiz", "Veliefendi", "Yenidoƒüan", "Ye≈üiltepe"]}
};
let myChart;
const ds=document.getElementById('districts'), ns=document.getElementById('neighborhoods');
window.onload=()=>{Object.keys(data).sort((a,b)=>a.localeCompare(b,'tr')).forEach(d=>ds.add(new Option(d,d)));updateNeighborhoods();};
function updateNeighborhoods(){const d=ds.value;ns.innerHTML='';data[d].n.sort((a,b)=>a.localeCompare(b,'tr')).forEach(nh=>ns.add(new Option(nh,nh)));fetchWeather();}
async function fetchWeather(){const d=ds.value,{lat,lon}=data[d];try{const r=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,relative_humidity_2m,apparent_temperature,weather_code,wind_speed_10m&hourly=temperature_2m&daily=weather_code,temperature_2m_max,temperature_2m_min,uv_index_max&timezone=Europe%2FIstanbul`);if(!r.ok)throw new Error();const j=await r.json();updateUI(j);}catch(e){alert("Hata!");}}
function updateUI(j){const c=j.current;document.getElementById('loc-name').innerText=`${ns.value}, ${ds.value}`;document.getElementById('current-temp').innerText=`${Math.round(c.temperature_2m)}¬∞`;document.getElementById('feel-temp').innerText=`${Math.round(c.apparent_temperature)}¬∞`;document.getElementById('humidity').innerText=`%${c.relative_humidity_2m}`;document.getElementById('wind').innerText=`${c.wind_speed_10m} km/s`;document.getElementById('uv').innerText=j.daily.uv_index_max[0];document.getElementById('weather-desc').innerText=getW(c.weather_code);upC(j.hourly);upF(j.daily);setA(c.weather_code);}
function getW(c){if(c==0)return "A√ßƒ±k";if(c<=3)return "Bulutlu";if(c<=48)return "Sisli";if(c<=67)return "Yaƒümurlu";if(c<=77)return "Kar Yaƒüƒ±≈ülƒ±";return "Fƒ±rtƒ±na";}
function upC(h){const ctx=document.getElementById('hourlyChart').getContext('2d');if(myChart)myChart.destroy();myChart=new Chart(ctx,{type:'line',data:{labels:h.time.slice(0,24).map(t=>t.split('T')[1]),datasets:[{data:h.temperature_2m.slice(0,24),borderColor:'#fff',fill:true,tension:0.4}]},options:{plugins:{legend:{display:false}},scales:{x:{ticks:{color:'#fff'}},y:{ticks:{color:'#fff'}}}}});}
function upF(d){const f=document.getElementById('forecast');f.innerHTML='';const e={0:'‚òÄÔ∏è',1:'üå§Ô∏è',2:'‚õÖ',3:'‚òÅÔ∏è',45:'üå´Ô∏è',61:'üåßÔ∏è',71:'‚ùÑÔ∏è',95:'‚õàÔ∏è'};for(let i=0;i<7;i++){const div=document.createElement('div');div.className='forecast-item';div.innerHTML=`<div>${new Date(d.time[i]).toLocaleDateString('tr',{weekday:'short'})}</div><div style="font-size:24px">${e[d.weather_code[i]]||'‚òÅÔ∏è'}</div><b>${Math.round(d.temperature_2m_max[i])}¬∞</b>`;f.appendChild(div);}}
function setA(c){const a=document.getElementById('weather-anim');a.innerHTML='';let t=(c>=51&&c<=67||c>=80)?'drop':(c>=71&&c<=77?'snow':'');if(t){for(let i=0;i<50;i++){const d=document.createElement('div');d.className=t;d.style.left=Math.random()*100+'vw';d.style.animationDuration=(Math.random()+0.5)+'s';a.appendChild(d);}}}
</script>
</body>
</html>
