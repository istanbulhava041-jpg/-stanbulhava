<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ä°STANBUL HAVA PRO ULTRA v17.0</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root { --bg: #020617; --card: rgba(30, 41, 59, 0.9); --accent: #38bdf8; --neon: #00f2ff; --warn: #f43f5e; }
        body { margin: 0; background: var(--bg); color: white; font-family: 'Segoe UI', sans-serif; overflow-x: hidden; }
        .glass { background: var(--card); backdrop-filter: blur(15px); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 20px; }
        .header { display: flex; align-items: center; padding: 15px; background: #0f172a; border-bottom: 2px solid var(--neon); position: sticky; top: 0; z-index: 1000; }
        .sidebar { position: fixed; top: 0; left: -100%; width: 280px; height: 100%; background: #0f172a; z-index: 2000; transition: 0.3s; padding: 25px; border-right: 2px solid var(--neon); overflow-y: auto; }
        .sidebar.open { left: 0; }
        .main { padding: 15px; max-width: 500px; margin: auto; display: grid; gap: 15px; }
        #temp-val { font-size: 75px; font-weight: 900; color: #fff; text-shadow: 0 0 20px rgba(0,242,255,0.5); margin: 0; line-height: 1; }
        #feels-like { font-size: 14px; opacity: 0.8; color: var(--accent); margin-top: 5px; font-weight: bold; }
        .grid-stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
        .stat-card { padding: 10px; text-align: center; font-size: 11px; }
        .stat-card b { display: block; font-size: 14px; color: var(--neon); }
        select { width: 100%; padding: 12px; border-radius: 12px; background: #1e293b; color: white; border: 1px solid var(--accent); margin-bottom: 8px; font-weight: bold; outline: none; }
        .btn-live { display: block; padding: 12px; background: rgba(0,242,255,0.1); border: 1px solid var(--neon); color: var(--neon); text-decoration: none; border-radius: 10px; text-align: center; margin-bottom: 10px; font-weight: bold; }
        .forecast-container { display: flex; gap: 10px; overflow-x: auto; padding-bottom: 5px; scrollbar-width: none; }
        .forecast-card { min-width: 80px; text-align: center; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 15px; }
        .forecast-card span { display: block; font-size: 10px; opacity: 0.7; }
        .forecast-card b { display: block; font-size: 16px; color: var(--neon); margin: 5px 0; }
    </style>
</head>
<body>

<div id="sidebar" class="sidebar">
    <h2 style="color: var(--neon);">ULTRA MENÃœ</h2>
    <a href="https://www.iski.gov.tr/web/tr-TR/baraj-doluluk-oranlari" target="_blank" class="btn-live">ğŸ’§ BARAJ %38.73</a>
    <a href="https://www.istanbuleczaciodasi.org.tr/nobetci-eczane" target="_blank" class="btn-live">ğŸ¥ ECZANELER</a>
    <a href="https://uym.ibb.gov.tr/" target="_blank" class="btn-live">ğŸš— TRAFÄ°K DURUMU</a>
    <hr style="opacity:0.1; margin:20px 0;">
    <p style="font-size: 11px;">Ä°letiÅŸim: <b>istanbulhava041@gmail.com</b></p>
    <button onclick="toggleMenu()" style="width:100%; padding:10px; background:var(--warn); border:none; color:white; border-radius:8px; cursor:pointer;">KAPAT</button>
</div>

<div class="header">
    <button onclick="toggleMenu()" style="background:none; border:none; color:var(--neon); font-size:25px; cursor:pointer;">â˜°</button>
    <b style="margin-left: 15px;">Ä°STANBUL HAVA <span style="color:var(--neon)">PRO ULTRA</span></b>
</div>

<div class="main">
    <div class="glass" style="padding: 12px;">
        <select id="ilce" onchange="loadMah()"></select>
        <select id="mah" onchange="fetchData()"></select>
    </div>

    <div class="glass" style="padding: 25px; text-align: center;">
        <div id="loc-name" style="opacity:0.6; font-size:12px; letter-spacing:1px; text-transform: uppercase;">YÃœKLENÄ°YOR...</div>
        <div id="temp-val">--Â°</div>
        <div id="feels-like">Hissedilen: --Â°</div>
        <div id="weather-desc" style="font-size: 20px; font-weight: bold; color: var(--neon); margin-top:10px;">VERÄ° Ã‡EKÄ°LÄ°YOR...</div>
    </div>

    <div class="glass" style="padding: 15px;">
        <div class="grid-stats">
            <div class="stat-card glass">âš½ MaÃ§<b id="sc-hali">-</b></div>
            <div class="stat-card glass">ğŸ”¥ Mangal<b id="sc-mangal">-</b></div>
            <div class="stat-card glass">ğŸš¢ Vapur<b id="sc-vapur">-</b></div>
            <div class="stat-card glass">ğŸ£ BalÄ±k<b id="sc-balik">-</b></div>
            <div class="stat-card glass">ğŸ’§ Baraj<b>%38.73</b></div>
            <div class="stat-card glass">ğŸƒ Hava<b>Ä°yi</b></div>
        </div>
    </div>

    <div class="glass" style="padding: 10px;">
        <canvas id="liveChart" height="130"></canvas>
    </div>

    <div class="glass" style="padding: 15px;">
        <div style="font-size: 12px; margin-bottom: 10px; font-weight: bold; color: var(--neon);">ğŸ“… 5 GÃœNLÃœK TAHMÄ°N</div>
        <div id="forecast" class="forecast-container"></div>
    </div>
</div>

<script>
// 963 Mahalle Veri Havuzu (Kodun kÄ±salÄ±ÄŸÄ± iÃ§in Ã¶zetlenmiÅŸ ama tam Ã§alÄ±ÅŸÄ±r yapÄ±)
const dataBank = {
    "Adalar": ["Burgazada", "Heybeliada", "KÄ±nalÄ±ada", "Maden", "Nizam"],
    "ArnavutkÃ¶y": ["Adnan Menderes", "Anadolu", "ArnavutkÃ¶y Merkez", "AtatÃ¼rk", "BaklalÄ±", "Balaban", "BoÄŸazkÃ¶y", "Bolluca", "BoyalÄ±k", "Ã‡ilingir", "Deliklikaya", "DursunkÃ¶y", "Durusu", "Fatih", "HacÄ±maÅŸlÄ±", "HadÄ±mkÃ¶y", "HaraÃ§Ã§Ä±", "Hastane", "Hicret", "Ä°mrahor", "Ä°slambey", "Karaburun", "KarlÄ±bayÄ±r", "MavigÃ¶l", "Mehmet Akif Ersoy", "Mustafa Kemal PaÅŸa", "Nenehatun", "Ã–merli", "SazlÄ±bosna", "TaÅŸoluk", "TayakadÄ±n", "Terkos", "YassÄ±Ã¶ren", "Yavuz Selim", "YenikÃ¶y", "YeÅŸilbayÄ±r", "Yunus Emre"],
    "AtaÅŸehir": ["AÅŸÄ±k Veysel", "AtatÃ¼rk", "Barbaros", "EsatpaÅŸa", "FerhatpaÅŸa", "Fetih", "Ä°Ã§erenkÃ¶y", "Ä°nÃ¶nÃ¼", "KayÄ±ÅŸdaÄŸÄ±", "KÃ¼Ã§Ã¼kbakkalkÃ¶y", "Mevlana", "Mimar Sinan", "Mustafa Kemal", "Ã–rnek", "Yeni Ã‡amlÄ±ca", "Yeni Sahra", "YeniÅŸehir"],
    "AvcÄ±lar": ["AmbarlÄ±", "Cihangir", "DenizkÃ¶ÅŸkler", "FiruzkÃ¶y", "GÃ¼mÃ¼ÅŸpala", "Merkez", "Mustafa Kemal PaÅŸa", "Tahtakale", "Ãœniversite", "YeÅŸilkent"],
    "BaÄŸcÄ±lar": ["100. YÄ±l", "BaÄŸlar", "Barbaros", "Ã‡Ä±nar", "DemirkapÄ±", "Evren", "Fatih", "Fevzi Ã‡akmak", "GÃ¶ztepe", "GÃ¼neÅŸli", "HÃ¼rriyet", "Ä°nÃ¶nÃ¼", "KazÄ±m Karabekir", "KemalpaÅŸa", "KirazlÄ±", "Mahmutbey", "Merkez", "Sancaktepe", "Yavuz Selim", "YenigÃ¼n", "Yenimahalle", "YÄ±ldÄ±ztepe"],
    "BahÃ§elievler": ["BahÃ§elievler", "Cumhuriyet", "Ã‡obanÃ§eÅŸme", "Fevzi Ã‡akmak", "HÃ¼rriyet", "Kocasinan", "SiyavuÅŸpaÅŸa", "SoÄŸanlÄ±", "Åirinevler", "Yenibosna", "Zafer"],
    "BakÄ±rkÃ¶y": ["AtakÃ¶y 1.", "AtakÃ¶y 2-5-6.", "AtakÃ¶y 3-4-11.", "AtakÃ¶y 7-8-9-10.", "BasÄ±nkÃ¶y", "Cevizlik", "Kartaltepe", "Osmaniye", "SakÄ±zaÄŸacÄ±", "ÅenlikkÃ¶y", "Yenimahalle", "YeÅŸilkÃ¶y", "YeÅŸilyurt", "Zeytinlik", "Zuhuratbaba"],
    "BaÅŸakÅŸehir": ["AltÄ±nÅŸehir", "BahÃ§eÅŸehir 1.", "BahÃ§eÅŸehir 2.", "BaÅŸak", "BaÅŸakÅŸehir", "GÃ¼vercintepe", "Ä°kitelli OSB", "KayabaÅŸÄ±", "Åahintepe", "Åamlar", "Ziya GÃ¶kalp"],
    "BayrampaÅŸa": ["AltÄ±ntepsi", "CevatpaÅŸa", "Ä°smet PaÅŸa", "Kartaltepe", "Kocatepe", "MuratpaÅŸa", "Orta", "Terazidere", "Vatan", "YenidoÄŸan", "YÄ±ldÄ±rÄ±m"],
    "BeÅŸiktaÅŸ": ["AbbasaÄŸa", "Akatlar", "ArnavutkÃ¶y", "Balmumcu", "Bebek", "CihannÃ¼ma", "DikilitaÅŸ", "Etiler", "Gayrettepe", "Konaklar", "KuruÃ§eÅŸme", "KÃ¼ltÃ¼r", "LevazÄ±m", "Levent", "Mecidiye", "Muradiye", "Nisbetiye", "OrtakÃ¶y", "SinanpaÅŸa", "TÃ¼rkali", "Ulus", "ViÅŸnezade", "YÄ±ldÄ±z"],
    "Beykoz": ["Acarlar", "Akbaba", "AlibahadÄ±r", "Anadolu HisarÄ±", "Anadolu KavaÄŸÄ±", "Anadolufeneri", "BaklacÄ±", "Bozhane", "Cumhuriyet", "Ã‡amlÄ±bahÃ§e", "Ã‡engeldere", "Ã‡iftlik", "Ã‡iÄŸdem", "Ã‡ubuklu", "Dereseki", "ElmalÄ±", "Fatih", "GÃ¶ksu", "GÃ¶llÃ¼", "GÃ¶rele", "GÃ¶ztepe", "GÃ¼mÃ¼ÅŸsuyu", "Ä°ncirkÃ¶y", "Ä°shaklÄ±", "KanlÄ±ca", "KavacÄ±k", "Kaynarca", "KÄ±lÄ±Ã§lÄ±", "MahmutÅŸevketpaÅŸa", "Merkez", "OrtaÃ§eÅŸme", "Ã–yÃ¼mce", "Ã–rnekkÃ¶y", "PaÅŸabahÃ§e", "PaÅŸamandÄ±ra", "PolonezkÃ¶y", "PoyrazkÃ¶y", "Riva", "RÃ¼zgarlÄ±bahÃ§e", "SoÄŸuksu", "TokatkÃ¶y", "YalÄ±kÃ¶y", "Yavuz Selim", "Yenimahalle", "ZerzavatÃ§Ä±"],
    "BeylikdÃ¼zÃ¼": ["Adnan Kahveci", "BarÄ±ÅŸ", "BÃ¼yÃ¼kÅŸehir", "Cumhuriyet", "DereaÄŸzÄ±", "GÃ¼rpÄ±nar", "KavaklÄ±", "Marmara", "Sahil", "Yakuplu"],
    "BeyoÄŸlu": ["Arap Cami", "AsmalÄ± Mescit", "Bedrettin", "Bereketzade", "Bostan", "BÃ¼lbÃ¼l", "Camiikebir", "Cihangir", "Ã‡atmamescit", "Ã‡ukur", "Emekyemez", "Evliya Ã‡elebi", "Fetihtepe", "FiruzaÄŸa", "GÃ¼mÃ¼ÅŸsuyu", "HacÄ±ahmet", "HacÄ±mimi", "HalÄ±cÄ±oÄŸlu", "HÃ¼seyinayni", "Ä°stiklal", "KadÄ±mehmet", "KalyoncukulluÄŸu", "KaptanpaÅŸa", "KatipmustafaÃ§elebi", "KeÃ§ecipiri", "KemankeÅŸ", "KÄ±lÄ±Ã§alipaÅŸa", "Kocatepe", "KulaksÄ±z", "KuloÄŸlu", "KÃ¼Ã§Ã¼kpiyale", "MÃ¼eyyetzade", "Ã–rnektepe", "PiripaÅŸa", "PiyalepaÅŸa", "PÃ¼rtelaÅŸ", "Sururi", "SÃ¼tlÃ¼ce", "Åahkulu", "Åehitmuhtar", "Tomtom", "Yahya Kahya", "YeniÅŸehir"],
    "BÃ¼yÃ¼kÃ§ekmece": ["19 MayÄ±s", "Ahmediye", "Alkent 2000", "AtatÃ¼rk", "BahÃ§elievler", "BatÄ±kÃ¶y", "Celaliye", "Cumhuriyet", "Ã‡akmaklÄ±", "Dizdariye", "Ekinoba", "Fatih", "GÃ¼zelce", "HÃ¼rriyet", "Kamiloba", "KaraaÄŸaÃ§", "Kumburgaz", "Mimarsinan", "Muratbey", "MuratÃ§eÅŸme", "PÄ±nartepe", "Sinanoba", "TÃ¼rkoba", "Ulus", "Yenimahalle"],
    "Ã‡atalca": ["Akalan", "AtatÃ¼rk", "AydÄ±nlar", "BahÅŸayiÅŸ", "BaÅŸak", "Belgrat", "BinkÄ±lÄ±Ã§", "Ã‡akÄ±l", "Ã‡anakÃ§a", "Ã‡iftlikkÃ¶y", "DaÄŸyenice", "Elbasan", "Fatih", "FerhatpaÅŸa", "GÃ¶kÃ§eali", "GÃ¼mÃ¼ÅŸpÄ±nar", "HallaÃ§lÄ±", "Hisarbeyli", "Ä°hsaniye", "Ä°nceÄŸiz", "Ä°zzettin", "KabakÃ§a", "KaleiÃ§i", "Kalfa", "KaracakÃ¶y", "Karamandere", "Kestanelik", "KÄ±zÄ±lcaali", "Muratbey", "NakkaÅŸ", "OklalÄ±", "OrmanlÄ±", "Ovayenice", "Ã–rcÃ¼nlÃ¼", "Ã–rencik", "SubaÅŸÄ±", "YalÄ±kÃ¶y", "YaylacÄ±k", "YazlÄ±k"],
    "Ã‡ekmekÃ¶y": ["AlemdaÄŸ", "AydÄ±nlar", "Cumhuriyet", "Ã‡amlÄ±k", "Ã‡atalmeÅŸe", "EkÅŸioÄŸlu", "GÃ¼ngÃ¶ren", "Hamidiye", "HÃ¼seyinli", "KirazlÄ±dere", "KoÃ§ullu", "Mehmet Akif", "Merkez", "Mimar Sinan", "NiÅŸantepe", "Ã–merli", "ReÅŸadiye", "SÄ±rapÄ±nar", "SoÄŸukpÄ±nar", "SultanÃ§iftliÄŸi", "TaÅŸdelen"],
    "Esenler": ["Birlik", "Ã‡ifte Havuzlar", "DavutpaÅŸa", "Fatih", "Fevzi Ã‡akmak", "HavaalanÄ±", "KazÄ±m Karabekir", "Kemer", "Menderes", "Mimar Sinan", "NamÄ±k Kemal", "Nene Hatun", "OruÃ§reis", "Tuna", "Turgut Reis", "Yavuz Selim"],
    "Esenyurt": ["AkÃ§aburgaz", "Akevler", "AkÅŸemseddin", "ArdÄ±Ã§lÄ±", "AÅŸÄ±k Veysel", "AtatÃ¼rk", "BaÄŸlarÃ§eÅŸme", "BalÄ±kyolu", "Barbaros Hayrettin PaÅŸa", "Battalgazi", "Cumhuriyet", "Ã‡Ä±nar", "Fatih", "GÃ¼zelyurt", "HÃ¼rriyet", "Ä°ncirtepe", "Ä°nÃ¶nÃ¼", "Ä°stiklal", "KÄ±raÃ§", "Mehmet Akif Ersoy", "MehterÃ§eÅŸme", "Mevlana", "NamÄ±k Kemal", "Necip FazÄ±l KÄ±sakÃ¼rek", "Orhan Gazi", "Osmangazi", "Piri Reis", "Saadetdere", "Selahaddin Eyyubi", "Sultaniye", "SÃ¼leymaniye", "Åehitler", "TalatpaÅŸa", "Turgut Ã–zal", "ÃœÃ§evler", "Yenikent", "YeÅŸilkent", "Yunusemre", "Zafer"],
    "EyÃ¼psultan": ["AÄŸaÃ§lÄ±", "AkpÄ±nar", "AkÅŸemseddin", "AlibeykÃ¶y", "Ã‡Ä±rÃ§Ä±r", "Defterdar", "DÃ¼ÄŸmeciler", "Emniyettepe", "Esentepe", "EyÃ¼p Merkez", "GÃ¶ktÃ¼rk", "GÃ¼zeltepe", "IÅŸÄ±klar", "Ä°hsaniye", "Ä°slambey", "Karadolap", "Kemerburgaz", "Mimar Sinan", "MithatpaÅŸa", "NiÅŸancÄ±", "Odayeri", "PirinÃ§Ã§i", "Rami Cuma", "Rami Yeni", "Sakarya", "SilahtaraÄŸa", "TopÃ§ular", "YeÅŸilpÄ±nar"],
    "Fatih": ["Aksaray", "AkÅŸemsettin", "Alemdar", "Ali KuÅŸÃ§u", "Atikali", "Ayvansaray", "BalabanaÄŸa", "Balat", "BeyazÄ±t", "Binbirdirek", "Cankurtaran", "CerrahpaÅŸa", "Cibali", "DemirtaÅŸ", "DerviÅŸ Ali", "Eminsinan", "HacÄ±kadÄ±n", "Haseki Sultan", "HÄ±rka-i Åerif", "Hobyar", "Hoca PaÅŸa", "Ä°skenderpaÅŸa", "Kalenderhane", "KaragÃ¼mrÃ¼k", "Katip KasÄ±m", "KemalpaÅŸa", "KocamustafapaÅŸa", "KÃ¼Ã§Ã¼kayasofya", "Mercan", "MesihpaÅŸa", "MevlanakapÄ±", "Mimar Hayrettin", "Mimar Kemalettin", "Molla Fenari", "Molla GÃ¼rani", "Molla HÃ¼srev", "Muhsine Hatun", "NiÅŸanca", "RÃ¼stempaÅŸa", "SaraÃ§ Ä°shak", "SarÄ±demir", "Seyyid Ã–mer", "SilivrikapÄ±", "Sultan Ahmet", "Sururi", "SÃ¼leymaniye", "SÃ¼mbÃ¼l Efendi", "Åehremini", "Åehsuvar Bey", "Tahtakale", "Taya Hatun", "TopkapÄ±", "Yavuz Sinan", "Yavuz Sultan Selim", "Yedikule", "Zeyrek"],
    "GaziosmanpaÅŸa": ["BaÄŸlarbaÅŸÄ±", "Barbaros Hayrettin PaÅŸa", "Fevzi Ã‡akmak", "HÃ¼rriyet", "Karadeniz", "KarayollarÄ±", "KarlÄ±tepe", "KazÄ±m Karabekir", "Merkez", "Mevlana", "PazariÃ§i", "SarÄ±gÃ¶l", "ÅemsipaÅŸa", "Yeni Mahalle", "YenidoÄŸan", "YÄ±ldÄ±ztabya"],
    "GÃ¼ngÃ¶ren": ["Abdurrahman Nafiz GÃ¼rman", "AkÄ±ncÄ±lar", "GenÃ§osman", "GÃ¼neÅŸtepe", "GÃ¼ven", "Haznedar", "MareÅŸal Ã‡akmak", "Mehmet Nesih Ã–zmen", "Merkez", "Sanayi", "Tozkoparan"],
    "KadÄ±kÃ¶y": ["19 MayÄ±s", "AcÄ±badem", "BostancÄ±", "Caddebostan", "CaferaÄŸa", "DumlupÄ±nar", "EÄŸitim", "ErenkÃ¶y", "FenerbahÃ§e", "Feneryolu", "Fikirtepe", "GÃ¶ztepe", "HasanpaÅŸa", "KoÅŸuyolu", "KozyataÄŸÄ±", "MerdivenkÃ¶y", "OsmanaÄŸa", "RasimpaÅŸa", "SahrayÄ± Cedit", "Suadiye", "ZÃ¼htÃ¼paÅŸa"],
    "KaÄŸÄ±thane": ["Ã‡aÄŸlayan", "Ã‡eliktepe", "Emniyet Evleri", "GÃ¼ltepe", "GÃ¼rsel", "Hamidiye", "Harmantepe", "HÃ¼rriyet", "Mehmet Akif Ersoy", "Merkez", "Nurtepe", "OrtabayÄ±r", "Sanayi", "Seyrantepe", "Åirintepe", "TalatpaÅŸa", "Telsizler", "Yahya Kemal", "YeÅŸilce"],
    "Kartal": ["Atalar", "Cevizli", "Cumhuriyet", "Ã‡avuÅŸoÄŸlu", "Esentepe", "GÃ¼mÃ¼ÅŸpÄ±nar", "HÃ¼rriyet", "KarlÄ±ktepe", "Kordonboyu", "Orhantepe", "Orta", "Petrol Ä°ÅŸ", "SoÄŸanlÄ±k Yeni", "Topselvi", "UÄŸur Mumcu", "YakacÄ±k Ã‡arÅŸÄ±", "YakacÄ±k Yeni", "YalÄ±", "YukarÄ±", "Yunus"],
    "KÃ¼Ã§Ã¼kÃ§ekmece": ["Atakent", "AtatÃ¼rk", "BeÅŸyol", "Cennet", "Cumhuriyet", "Fatih", "Fevzi Ã‡akmak", "GÃ¼ltepe", "HalkalÄ± Merkez", "Ä°nÃ¶nÃ¼", "Ä°stasyon", "Kanarya", "Kartaltepe", "KemalpaÅŸa", "Mehmet Akif", "SÃ¶ÄŸÃ¼tlÃ¼ Ã‡eÅŸme", "Sultan Murat", "Tevfik Bey", "YarÄ±mburgaz", "Yeni Mahalle", "YeÅŸilova"],
    "Maltepe": ["AltayÃ§eÅŸme", "AltÄ±ntepe", "AydÄ±nevler", "BaÄŸlarbaÅŸÄ±", "BaÅŸÄ±bÃ¼yÃ¼k", "BÃ¼yÃ¼kbakkalkÃ¶y", "Cevizli", "Ã‡Ä±nar", "Esenkent", "Feyzullah", "FÄ±ndÄ±klÄ±", "Girne", "GÃ¼lensu", "GÃ¼lsuyu", "Ä°dealtepe", "KÃ¼Ã§Ã¼kyalÄ±", "YalÄ±", "ZÃ¼mrÃ¼tevler"],
    "Pendik": ["Ahmet Yesevi", "BaÄŸlarbaÅŸÄ±", "BallÄ±ca", "BatÄ±", "Ã‡amÃ§eÅŸme", "Ã‡amlÄ±k", "Ã‡Ä±nardere", "DoÄŸu", "DumlupÄ±nar", "Emirli", "ErtuÄŸrul Gazi", "Esenler", "EsenyalÄ±", "Fatih", "Fevzi Ã‡akmak", "GÃ¶Ã§beyli", "GÃ¼llÃ¼ BaÄŸlar", "GÃ¼zelyalÄ±", "Harmandere", "KavakpÄ±nar", "Kaynarca", "Kurna", "KurtdoÄŸmuÅŸ", "KurtkÃ¶y", "Orhangazi", "Orta", "RamazanoÄŸlu", "Sanayi", "Sapan BaÄŸlarÄ±", "SÃ¼lÃ¼ntepe", "Åeyhli", "Velibaba", "Yayalar", "Yeni Mahalle", "YeniÅŸehir", "YeÅŸilbaÄŸlar"],
    "Sancaktepe": ["Abdurrahmangazi", "AkpÄ±nar", "AtatÃ¼rk", "Emek", "EyÃ¼p Sultan", "Fatih", "Hilal", "Ä°nÃ¶nÃ¼", "Meclis", "Merve", "Mevlana", "Osmangazi", "PaÅŸakÃ¶y", "Safa", "SamandÄ±ra", "SarÄ±gazi", "Veysel Karani", "YenidoÄŸan", "Yunusemre"],
    "SarÄ±yer": ["AyazaÄŸa", "BaltalimanÄ±", "BÃ¼yÃ¼kdere", "Cumhuriyet", "Ã‡ayÄ±rbaÅŸÄ±", "DarÃ¼ÅŸÅŸafaka", "DemircikÃ¶y", "Emirgan", "Ferahevler", "GaripÃ§e", "GÃ¼mÃ¼ÅŸdere", "Huzur", "Ä°stinye", "KÄ±sÄ±rkaya", "KireÃ§burnu", "KocataÅŸ", "KumkÃ¶y", "Maden", "Maslak", "Merkez", "PÄ±nar", "Poligon", "PTT Evleri", "ReÅŸitpaÅŸa", "Rumelifeneri", "RumelihisarÄ±", "RumelikavaÄŸÄ±", "Tarabya", "UskumrukÃ¶y", "Yeni", "YenikÃ¶y", "ZekeriyakÃ¶y"],
    "Silivri": ["AkÃ¶ren", "Alibey", "AlipaÅŸa", "Balaban", "Bekirli", "Beyciler", "BÃ¼yÃ¼kÃ§avuÅŸlu", "BÃ¼yÃ¼kkÄ±lÄ±Ã§lÄ±", "BÃ¼yÃ¼ksinekli", "Cumhuriyet", "Ã‡ayÄ±rdere", "Ã‡eltik", "DanamandÄ±ra", "Fatih", "Fener", "FevzipaÅŸa", "Gazitepe", "GÃ¼mÃ¼ÅŸyaka", "HÃ¼rriyet", "Ä°smetpaÅŸa", "KadÄ±kÃ¶y", "KavaklÄ±", "KurfallÄ±", "KÃ¼Ã§Ã¼kkÄ±lÄ±Ã§lÄ±", "KÃ¼Ã§Ã¼ksinekli", "Mimar Sinan", "OrtakÃ¶y", "Piri Mehmet PaÅŸa", "Sancaktepe", "Sayalar", "SelimpaÅŸa", "Semizkumlar", "Seymen", "Yeni", "YolÃ§atÄ±"],
    "Sultanbeyli": ["Abdurrahmangazi", "Adil", "Ahmet Yesevi", "AkÅŸemsettin", "Battalgazi", "Fatih", "Hamidiye", "HasanpaÅŸa", "Mecidiye", "Mehmet Akif", "Mimar Sinan", "Necip FazÄ±l", "Orhangazi", "Turgut Reis", "Yavuz Selim"],
    "Sultangazi": ["50. YÄ±l", "75. YÄ±l", "Cebeci", "Cumhuriyet", "Esentepe", "Eski Habipler", "Gazi", "Habipler", "Ä°smetpaÅŸa", "MalkoÃ§oÄŸlu", "SultanÃ§iftliÄŸi", "UÄŸur Mumcu", "Yayla", "ZÃ¼beyde HanÄ±m"],
    "Åile": ["AÄŸva Merkez", "Ahmetli", "AkÃ§akese", "AlacalÄ±", "AvcÄ±koru", "Balibey", "BÄ±Ã§kÄ±dere", "Bozgoca", "BucaklÄ±", "Ã‡ataklÄ±", "Ã‡avuÅŸ", "Ã‡ayÄ±rbaÅŸÄ±", "Ã‡elebi", "Ã‡engelli", "DarlÄ±k", "DeÄŸirmenÃ§ayÄ±rÄ±", "DoÄŸancÄ±lÄ±", "Erenler", "Esenceli", "Geredeli", "GÃ¶Ã§e", "GÃ¶kmaslÄ±", "GÃ¶ksu", "HacÄ±kasÄ±m", "HacÄ±llÄ±", "HasanlÄ±", "Ä°mrendere", "Ä°mrenli", "Ä°sakÃ¶y", "Kabakoz", "KadÄ±kÃ¶y", "Kalem", "Karabeyli", "Karakiraz", "Karamandere", "Kervansaray", "KÄ±zÄ±lca", "Koru", "Kumbaba", "KurfallÄ±", "Kurna", "MeÅŸrutiyet", "OruÃ§oÄŸlu", "OsmankÃ¶y", "OvacÄ±k", "SahilkÃ¶y", "SatmazlÄ±", "Sofular", "SoÄŸullu", "Sortullu", "Åuayipli", "Teke", "Ulupelit", "Ãœvezli", "YazÄ±manayÄ±r", "YenikÃ¶y", "YeÅŸilvadi"],
    "ÅiÅŸli": ["19 MayÄ±s", "Bozkurt", "Cumhuriyet", "Duatepe", "Ergenekon", "Esentepe", "EskiÅŸehir", "FerikÃ¶y", "Fulya", "GÃ¼lbahar", "Halaskargazi", "Halide Edip AdÄ±var", "Halil RÄ±fat PaÅŸa", "Harbiye", "Huzur", "Ä°nÃ¶nÃ¼", "Ä°zzet PaÅŸa", "KaptanpaÅŸa", "KuÅŸtepe", "Mahmut Åevket PaÅŸa", "MecidiyekÃ¶y", "Merkez", "MeÅŸrutiyet", "PaÅŸa", "TeÅŸvikiye", "Yayla"],
    "Tuzla": ["AkfÄ±rat", "Anadolu", "AydÄ±nlÄ±", "AydÄ±ntepe", "Cami", "Evliya Ã‡elebi", "Fatih", "Ä°Ã§meler", "Ä°stasyon", "Mescit", "Mimar Sinan", "OrhanlÄ±", "Orta", "Postane", "Åifa", "TepeÃ¶ren", "Yayla"],
    "Ãœmraniye": ["Adem Yavuz", "AltÄ±nÅŸehir", "ArmaÄŸanevler", "AÅŸaÄŸÄ± Dudullu", "Atakent", "AtatÃ¼rk", "Cemil MeriÃ§", "Ã‡akmak", "Ã‡amlÄ±k", "DumlupÄ±nar", "ElmalÄ±kent", "Esenevler", "EsenÅŸehir", "Fatih Sultan Mehmet", "HekimbaÅŸÄ±", "Huzur", "Ihlamuyu", "Ä°nkÄ±lap", "Ä°stiklal", "KazÄ±m Karabekir", "Madenler", "Mehmet Akif", "NamÄ±k Kemal", "Necip FazÄ±l", "Parseller", "Saray", "Site", "Åerifali", "Tantavi", "TatlÄ±su", "TepeÃ¼stÃ¼", "TopaÄŸacÄ±", "Yamanevler", "YeniÅŸehir", "YukarÄ± Dudullu"],
    "ÃœskÃ¼dar": ["AcÄ±badem", "Ahmediye", "Altunizade", "Aziz Mahmut HÃ¼dayi", "BahÃ§elievler", "Barbaros", "Beylerbeyi", "Bulgurlu", "Burhaniye", "Cumhuriyet", "Ã‡engelkÃ¶y", "Ferah", "GÃ¼zeltepe", "Ä°cadiye", "Kandilli", "KÄ±sÄ±klÄ±", "KirazlÄ±tepe", "Kuleli", "Kuzguncuk", "KÃ¼Ã§Ã¼k Ã‡amlÄ±ca", "KÃ¼Ã§Ã¼ksu", "KÃ¼plÃ¼ce", "Mehmet Akif Ersoy", "Mimar Sinan", "Murat Reis", "Salacak", "Selami Ali", "Selimiye", "Sultantepe", "Ãœnalan", "Valide-i Atik", "YavuztÃ¼rk", "Zeynep Kamil"],
    "Zeytinburnu": ["BeÅŸtelsiz", "Ã‡Ä±rpÄ±cÄ±", "GÃ¶kalp", "KazlÄ±Ã§eÅŸme", "Maltepe", "Merkezefendi", "NuripaÅŸa", "Seyitnizam", "SÃ¼mer", "Telsiz", "Veliefendi", "YenidoÄŸan", "YeÅŸiltepe"]
};

const coords = {
    "Adalar": [40.87, 29.13], "ArnavutkÃ¶y": [41.18, 28.74], "AtaÅŸehir": [40.99, 29.11], "AvcÄ±lar": [40.98, 28.71],
    "BaÄŸcÄ±lar": [41.03, 28.83], "BahÃ§elievler": [40.99, 28.86], "BakÄ±rkÃ¶y": [40.97, 28.87], "BaÅŸakÅŸehir": [41.09, 28.80],
    "BayrampaÅŸa": [41.04, 28.89], "BeÅŸiktaÅŸ": [41.04, 29.00], "Beykoz": [41.11, 29.09], "BeylikdÃ¼zÃ¼": [40.99, 28.64],
    "BeyoÄŸlu": [41.03, 28.97], "BÃ¼yÃ¼kÃ§ekmece": [41.02, 28.59], "Ã‡atalca": [41.14, 28.46], "Ã‡ekmekÃ¶y": [41.04, 29.21],
    "Esenler": [41.04, 28.87], "Esenyurt": [41.03, 28.67], "EyÃ¼psultan": [41.04, 28.93], "Fatih": [41.01, 28.94],
    "GaziosmanpaÅŸa": [41.05, 28.91], "GÃ¼ngÃ¶ren": [41.02, 28.87], "KadÄ±kÃ¶y": [40.99, 29.02], "KaÄŸÄ±thane": [41.08, 28.97],
    "Kartal": [40.89, 29.19], "KÃ¼Ã§Ã¼kÃ§ekmece": [41.00, 28.77], "Maltepe": [40.93, 29.14], "Pendik": [40.87, 29.23],
    "Sancaktepe": [41.00, 29.23], "SarÄ±yer": [41.16, 29.05], "Silivri": [41.07, 28.24], "Sultanbeyli": [40.96, 29.26],
    "Sultangazi": [41.10, 28.87], "Åile": [41.17, 29.61], "ÅiÅŸli": [41.06, 28.98], "Tuzla": [40.82, 29.30],
    "Ãœmraniye": [41.03, 29.10], "ÃœskÃ¼dar": [41.02, 29.01], "Zeytinburnu": [40.99, 28.90]
};

let mainChart;
function toggleMenu() { document.getElementById('sidebar').classList.toggle('open'); }

window.onload = () => {
    const sel = document.getElementById("ilce");
    Object.keys(dataBank).sort((a,b)=>a.localeCompare(b,'tr')).forEach(d => sel.add(new Option(d, d)));
    sel.value = "Fatih";
    loadMah();
};

function loadMah() {
    const i = document.getElementById("ilce").value;
    const mSel = document.getElementById("mah");
    mSel.innerHTML = "";
    dataBank[i].sort((a,b)=>a.localeCompare(b,'tr')).forEach(m => mSel.add(new Option(m, m)));
    fetchData();
}

async function fetchData() {
    const i = document.getElementById("ilce").value;
    const m = document.getElementById("mah").value;
    const [lat, lon] = coords[i];
    document.getElementById("loc-name").innerText = `${m} / ${i}`;

    try {
        const response = await fetch(`https://api.open-meteo.com/v1/forecast
